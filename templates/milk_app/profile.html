{% extends 'milk_app/base.html' %}
{% load static %}
{% load crispy_forms_tags %}

<!DOCTYPE html>


{% block title_block %}
    user.username 's  profile

{% endblock %}

{% block body_block %}

<!-- https://bootstrapious.com/p/bootstrap-profile-page -->

<div class="row py-5 px-">
    <div class="col-xl-10 col-md-6 col-sm-10 mx-auto">

        <!-- Profile widget -->
        <div class="bg-white shadow rounded overflow-hidden">
            <div class="px-4 pt-0 pb-4 bg-dark">
                <div class="media align-items-end profile-header">
                    <div class="profile mr-4"> 
                    {% if user.userprofile.picture %}
                        <img src="/media/{{user.userprofile.picture}}" alt="No profile picture" width="130" class="rounded mb-2 img-thumbnail"><a href="#" class="btn btn-outline-light btn-sm btn-block" id = "formButton">Edit profile</a></div>
                    {% else %}
                        <img src="{% static 'images/empty_profile.png' %}" alt="No profile picture" width="130" class="rounded mb-2 img-thumbnail"><a href="#" class="btn btn-outline-light btn-sm btn-block" id = "formButton">Edit profile</a></div>
                    {% endif %}
                    <div class="media-body mb-5 text-white">
                        <h4 class="mt-0 mb-0">Greetings {{user.username}}</h4>
                        <p class="small mb-3"> Role: {{user.userprofile.account}}</p>
                    </div>
                </div>
            </div>

            <div class="bg-light p-4 d-flex justify-content-end text-center">
                <form style="display: none;" id = "update_form" method='POST' enctype="multipart/form-data" action="{% url 'milk_app:profile' %}">
            
                    {%csrf_token%}
                    {{u_form|crispy}}
                    {{p_form|crispy}}
                    
                    <button class = "btn btn-outline-dark btn-lg" type='submit' name = 'submit'>Make changes!</button>
                </form>
            </div>

            <!-- HOST VIEW -->
            {% if user.userprofile.account == 'Host' %}
            <div class="py-4 px-4">
                <div class="d-flex align-items-center justify-content-between mb-3">
                    <a href="{% url 'milk_app:my_listings' %}" class="mb-0">Browse Your Listings</a>
                    <a href="{% url 'milk_app:browse_listings' %}" class="mb-0">View all available listings</a>
                    <a href="{% url 'milk_app:add_listing' %}" class="mb-0">Add a listing</a>
                </div>
            </div>
            <!-- TENANT VIEW -->
            {% else%}
            <div class="py-4 px-4">
                <div class="d-flex align-items-center justify-content-between mb-3">
                    <a href="{% url 'milk_app:my_listings' %}" class="mb-0">Browse Listings that you are currently renting</a>
                    <a href="{% url 'milk_app:browse_listings' %}" class="mb-0">Browse all available listings</a>
                </div>
            </div>
            {% endif %}
                
        </div>
    
    
{% endblock %}


